# AST for Astro

All AST nodes generated by the parser follow the [ESLint AST specifications].  
The AST node in the script part is an AST generated by `espree` or the specified parser.

See [ESTree] for the AST node of the script generated by `espree`.

[eslint ast specifications]: https://eslint.org/docs/developer-guide/working-with-custom-parsers#the-ast-specification
[estree]: https://github.com/estree/estree

See details: [../src/ast/astro.ts](../src/ast/astro.ts)

## Common

### Node

All nodes defined here inherit the `Node` specification. See [ESLint AST specifications] for detail.

```ts
interface Node {
  type: string;
  loc: SourceLocation;
  range: [number, number];
}
```

## Root

### AstroProgram

This is the root node of the AST.

```ts
interface AstroProgram extends Node {
  type: "Program";
  body: (Statement | ImportOrExportDeclaration | AstroFragment)[];
  sourceType: "script" | "module";
  comments: Comment[];
  tokens: Token[];
}
```

## Elements and Fragments

### AstroFragment

This is the fragment node of Astro.

```ts
interface AstroFragment extends Node {
  type: "AstroFragment";
  children: (
    | JSXElement
    | JSXFragment
    | JSXExpression
    | JSXText
    | AstroHTMLComment
    | AstroRawText
    | AstroDoctype
  )[];
  parent: JSXElement | JSXFragment | AstroFragment;
}
```

### AstroDoctype

This is the doctype node.

```ts
interface AstroDoctype extends Node {
  type: "AstroDoctype";
  parent?: AstroFragment;
}
```

## Attributes

### AstroShorthandAttribute

This is the Astro shorthand attribute node. e.g. `<div {attr} />`

```ts
interface AstroShorthandAttribute extends Node {
  type: "AstroShorthandAttribute";
  name: JSXIdentifier | JSXNamespacedName;
  value: JSXExpressionContainer;
  parent: JSXOpeningElement;
}
```

### AstroTemplateLiteralAttribute

This is the Astro template-literal attribute node. e.g. ``<div attr=`foo` />``

```ts
interface AstroTemplateLiteralAttribute extends Node {
  type: "AstroTemplateLiteralAttribute";
  name: JSXIdentifier | JSXNamespacedName;
  value: JSXExpressionContainer & {
    expression: TemplateLiteral;
  };
  parent: JSXOpeningElement;
}
```

## Texts

### AstroRawText

This is the raw text node.

```ts
interface AstroRawText extends Node {
  type: "AstroRawText";
  value: string;
  raw: string;
  parent: JSXElement;
}
```

## Comments

### AstroHTMLComment

This is the HTML comment node.

```ts
interface AstroHTMLComment extends Node {
  type: "AstroHTMLComment";
  value: string;
  parent: JSXElement | JSXFragment | AstroFragment;
}
```

## Extended JSX

See details: [../src/ast/jsx.ts](../src/ast/jsx.ts)

### JSXElement

```ts
interface JSXElement extends Node {
  // ...
  children: (
    | JSXElement
    | JSXFragment
    | JSXExpression
    | JSXText
    | AstroHTMLComment
    | AstroRawText
  )[];
  // ...
}
```

### JSXFragment

```ts
interface JSXFragment extends Node {
  // ...
  children: (
    | JSXElement
    | JSXFragment
    | JSXExpression
    | JSXText
    | AstroHTMLComment
    | AstroRawText
  )[];
  // ...
}
```

### JSXOpeningElement

```ts
interface JSXOpeningElement extends Node {
  // ...
  attributes: (
    | JSXAttribute
    | JSXSpreadAttribute
    | AstroShorthandAttribute
    | AstroTemplateLiteralAttribute
  )[];
  // ...
}
```
